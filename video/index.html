<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Traafik — Safer Traffic Stops</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --night:#070b14;--night2:#0f1729;--road:#1a1a2e;--road-mark:#555;
  --red:#ff1744;--blue:#448aff;--green:#00e676;--green2:#00c853;
  --skin:#c68642;--skin-shadow:#a0652f;
  --traafik-bg:#0d1117;--traafik-card:#161b22;--traafik-border:#30363d;
  --glow-warm:rgba(255,213,79,0.15);
}
html,body{width:100%;height:100%;overflow:hidden;background:#000;font-family:'DM Sans',sans-serif}

/* ── CINEMA ── */
#cinema{position:fixed;inset:0;background:var(--night)}
.scene{position:absolute;inset:0;opacity:0;pointer-events:none;transition:opacity 1s ease;display:flex;align-items:center;justify-content:center;flex-direction:column}
.scene.active{opacity:1;pointer-events:auto}

/* narrative caption */
.caption{
  position:absolute;bottom:48px;left:50%;transform:translateX(-50%);
  font-family:'DM Sans',sans-serif;font-size:clamp(14px,2vw,20px);
  color:rgba(255,255,255,0.8);text-align:center;letter-spacing:0.02em;
  max-width:600px;line-height:1.6;opacity:0;transition:opacity .8s ease;
}
.caption.show{opacity:1}

/* progress */
#progress{position:fixed;top:0;left:0;height:3px;background:var(--green);z-index:100;transition:width .3s linear;width:0}

/* ══════════════════════════════════
   SCENE 0 — TITLE CARD
   ══════════════════════════════════ */
.scene-title{background:var(--night)}
.title-logo{
  font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(36px,8vw,72px);
  letter-spacing:-0.03em;color:#fff;opacity:0;transform:translateY(20px);
  animation:fadeUp 1s .3s ease forwards;
}
.title-logo span{color:var(--green)}
.title-sub{
  font-size:clamp(12px,1.5vw,16px);color:rgba(255,255,255,0.4);
  margin-top:12px;letter-spacing:0.15em;text-transform:uppercase;
  opacity:0;animation:fadeUp .8s .8s ease forwards;
}

/* ══════════════════════════════════
   SCENE 1 — ROAD / PULL OVER
   ══════════════════════════════════ */
.scene-road{background:linear-gradient(180deg,#070b14 0%,#0c1220 40%,#0f1729 60%,var(--road) 60.1%,#12122a 100%)}

/* stars */
.stars{position:absolute;top:0;left:0;width:100%;height:60%;overflow:hidden}
.star{position:absolute;width:2px;height:2px;background:#fff;border-radius:50%;opacity:.6}

/* moon */
.moon{
  position:absolute;top:8%;right:15%;width:60px;height:60px;
  background:radial-gradient(circle at 35% 35%,#ffeaa7,#dfe6e9);
  border-radius:50%;box-shadow:0 0 40px rgba(255,234,167,0.3);
}

/* road surface */
.road-surface{position:absolute;bottom:0;left:0;width:100%;height:40%;background:var(--road)}
.lane-marks{
  position:absolute;bottom:20%;left:0;width:200%;height:4px;
  background:repeating-linear-gradient(90deg,var(--road-mark) 0px,var(--road-mark) 40px,transparent 40px,transparent 80px);
  animation:scrollLane 1s linear infinite;
}
.lane-marks.stopped{animation-play-state:paused}
.road-edge{position:absolute;bottom:38%;left:0;width:100%;height:2px;background:rgba(255,255,255,0.08)}
.shoulder-line{position:absolute;bottom:8%;left:0;width:100%;height:2px;background:rgba(255,255,255,0.05)}

/* cars — side view */
.car{position:absolute;bottom:10%;transition:transform 2s ease}
.car-body{position:relative}

/* driver car */
.driver-car{right:35%;transform:translateX(0)}
.driver-car .car-base{
  width:160px;height:44px;background:#3d5a80;border-radius:6px;position:relative;
}
.driver-car .car-cabin{
  position:absolute;top:-28px;left:30px;width:90px;height:30px;
  background:#2c4460;border-radius:8px 8px 0 0;
  border:2px solid rgba(255,255,255,0.05);
}
.driver-car .car-cabin::before{
  content:'';position:absolute;inset:4px;
  background:rgba(100,180,255,0.12);border-radius:4px 4px 0 0;
}
.driver-car .windshield{
  position:absolute;top:-26px;left:25px;width:20px;height:28px;
  background:rgba(100,180,255,0.1);transform:skewX(-12deg);border-radius:2px 0 0 0;
}
.driver-car .headlight{
  position:absolute;top:12px;left:-4px;width:8px;height:8px;
  background:#ffd54f;border-radius:50%;
  box-shadow:0 0 20px rgba(255,213,79,0.5),-40px 0 60px rgba(255,213,79,0.15);
}
.driver-car .taillight{
  position:absolute;top:12px;right:-3px;width:6px;height:10px;
  background:#ff1744;border-radius:2px;box-shadow:0 0 10px rgba(255,23,68,0.4);
}
.car .wheel{
  position:absolute;bottom:-10px;width:22px;height:22px;
  background:#111;border-radius:50%;border:3px solid #333;
}
.car .wheel::after{
  content:'';position:absolute;inset:4px;border-radius:50%;
  background:#222;border:1px solid #444;
}
.driver-car .wheel-f{left:16px}
.driver-car .wheel-r{right:16px}

/* police car */
.police-car{right:-200px;transform:translateX(0);transition:right 2s ease}
.police-car.appear{right:18%}
.police-car.pulled-over{right:12%}
.police-car .car-base{
  width:170px;height:46px;
  background:linear-gradient(180deg,#f5f5f5 50%,#1a1a2e 50%);
  border-radius:6px;position:relative;
}
.police-car .car-cabin{
  position:absolute;top:-28px;left:32px;width:88px;height:30px;
  background:#e0e0e0;border-radius:8px 8px 0 0;
}
.police-car .car-cabin::before{
  content:'';position:absolute;inset:4px;
  background:rgba(100,180,255,0.08);border-radius:4px 4px 0 0;
}
.police-car .wheel-f{left:18px}
.police-car .wheel-r{right:18px}

/* light bar */
.light-bar{
  position:absolute;top:-36px;left:50px;width:60px;height:10px;
  background:#222;border-radius:4px;display:flex;justify-content:space-between;padding:2px 4px;
}
.light-bar .l-red,.light-bar .l-blue{
  width:12px;height:6px;border-radius:2px;
}
.light-bar .l-red{
  background:var(--red);
  animation:flashRed .4s ease infinite alternate;
  box-shadow:0 0 15px var(--red);
}
.light-bar .l-blue{
  background:var(--blue);
  animation:flashBlue .4s ease infinite alternate-reverse;
  box-shadow:0 0 15px var(--blue);
}

/* police light sweep on road */
.light-sweep{
  position:absolute;bottom:0;right:15%;width:300px;height:40%;
  background:radial-gradient(ellipse at center bottom,rgba(255,23,68,0.06) 0%,transparent 60%);
  animation:sweepRed .8s ease infinite alternate;
  pointer-events:none;
}
.light-sweep2{
  position:absolute;bottom:0;right:20%;width:300px;height:40%;
  background:radial-gradient(ellipse at center bottom,rgba(68,138,255,0.06) 0%,transparent 60%);
  animation:sweepRed .8s ease infinite alternate-reverse;
}

/* pulled over state */
.driver-car.pulled-over{transform:translateX(40px)}

/* ══════════════════════════════════
   SCENE 2 — NERVOUS DRIVER
   ══════════════════════════════════ */
.scene-nervous{background:linear-gradient(180deg,#0a0a14 0%,#12101e 100%)}

.car-interior{
  position:relative;width:min(90vw,500px);height:min(70vh,400px);
  background:radial-gradient(ellipse at 50% 80%,#1a1520 0%,#0a0810 100%);
  border-radius:20px;overflow:hidden;
  box-shadow:inset 0 0 80px rgba(0,0,0,0.5);
}

/* rearview mirror */
.rearview{
  position:absolute;top:20px;left:50%;transform:translateX(-50%);
  width:140px;height:50px;background:#111;border-radius:6px;
  border:2px solid #333;overflow:hidden;display:flex;align-items:center;justify-content:center;
}
.rearview-lights{
  width:100%;height:100%;
  background:linear-gradient(90deg,var(--red),var(--blue));
  opacity:0.6;animation:pulseRB 0.5s ease infinite alternate;
}

/* driver face */
.driver-face{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-55%);
}
.head{
  width:100px;height:115px;background:var(--skin);border-radius:50%;
  position:relative;box-shadow:inset -8px -4px 20px var(--skin-shadow);
}
/* hair */
.hair{
  position:absolute;top:-6px;left:5px;right:5px;height:40px;
  background:#1a1209;border-radius:50px 50px 0 0;
}
/* eyes */
.eyes{position:absolute;top:42px;left:50%;transform:translateX(-50%);display:flex;gap:24px}
.eye{
  width:22px;height:26px;background:#fff;border-radius:50%;
  position:relative;overflow:hidden;
  animation:wideEyes .3s ease infinite alternate;
}
.pupil{
  width:11px;height:13px;background:#1a0a00;border-radius:50%;
  position:absolute;top:8px;left:5px;
  animation:dartEyes 1.5s ease-in-out infinite;
}
.pupil::after{
  content:'';position:absolute;top:2px;left:2px;width:4px;height:4px;
  background:rgba(255,255,255,0.8);border-radius:50%;
}
/* eyebrows */
.brow{
  position:absolute;top:36px;width:26px;height:4px;background:#1a0a00;border-radius:2px;
  animation:furrow .5s ease infinite alternate;
}
.brow-l{left:18px;transform:rotate(8deg)}
.brow-r{right:18px;transform:rotate(-8deg)}
/* mouth */
.mouth{
  position:absolute;bottom:22px;left:50%;transform:translateX(-50%);
  width:20px;height:10px;border:3px solid #8b5a2b;
  border-top:none;border-radius:0 0 50% 50%;
  animation:mouthTremble .2s ease infinite alternate;
}
/* sweat */
.sweat{
  position:absolute;width:7px;height:10px;
  background:linear-gradient(180deg,rgba(100,181,246,0.8),rgba(100,181,246,0.2));
  border-radius:50% 50% 50% 50% / 30% 30% 70% 70%;
}
.sweat-1{top:30px;right:-2px;animation:sweatDrop 1.2s .2s ease-in infinite}
.sweat-2{top:25px;left:8px;animation:sweatDrop 1.5s .6s ease-in infinite}
.sweat-3{top:35px;right:10px;animation:sweatDrop 1s 1s ease-in infinite}

/* steering wheel */
.steering{
  position:absolute;bottom:30px;left:50%;transform:translateX(-50%);
}
.wheel-ring{
  width:120px;height:60px;border:8px solid #222;
  border-bottom:none;border-radius:60px 60px 0 0;
}
/* hands */
.hand{
  position:absolute;top:0;width:28px;height:20px;background:var(--skin);
  border-radius:8px;box-shadow:inset -2px -2px 5px var(--skin-shadow);
  animation:grip .15s ease infinite alternate;
}
.hand-l{left:4px}
.hand-r{right:4px}

/* red-blue ambient glow */
.rb-glow{
  position:absolute;inset:0;pointer-events:none;
  animation:rbAmbient .5s ease infinite alternate;
}

/* ══════════════════════════════════
   SCENE 3 — PHONE RINGS
   ══════════════════════════════════ */
.scene-ring{background:radial-gradient(ellipse at 50% 50%,#12101e,#070510)}

.phone{
  width:220px;height:440px;background:#111;border-radius:28px;
  border:3px solid #222;position:relative;overflow:hidden;
  box-shadow:0 0 60px rgba(0,0,0,0.8),0 0 100px rgba(0,230,118,0.05);
}
.phone-screen{
  position:absolute;inset:8px;border-radius:20px;overflow:hidden;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.phone-notch{
  position:absolute;top:8px;left:50%;transform:translateX(-50%);
  width:60px;height:6px;background:#000;border-radius:3px;z-index:2;
}

/* incoming call screen */
.call-screen{
  background:linear-gradient(180deg,#0d1117,#111820);
  text-align:center;padding:40px 16px;width:100%;height:100%;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.call-icon{
  width:70px;height:70px;border-radius:50%;
  background:linear-gradient(135deg,var(--green),#00b248);
  display:flex;align-items:center;justify-content:center;
  margin-bottom:20px;animation:ringPulse 1s ease infinite;
  box-shadow:0 0 30px rgba(0,230,118,0.3);
}
.call-icon svg{width:32px;height:32px;fill:#fff}
.call-label{
  font-family:'Syne',sans-serif;font-weight:700;color:#fff;
  font-size:13px;letter-spacing:0.1em;text-transform:uppercase;
  margin-bottom:6px;color:var(--green);
}
.call-name{font-size:20px;font-weight:600;color:#fff;margin-bottom:4px}
.call-type{font-size:13px;color:rgba(255,255,255,0.4)}
.call-buttons{display:flex;gap:40px;margin-top:32px}
.call-btn{
  width:56px;height:56px;border-radius:50%;border:none;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
}
.call-decline{background:#ff1744;box-shadow:0 0 20px rgba(255,23,68,0.3)}
.call-accept{background:var(--green);box-shadow:0 0 20px rgba(0,230,118,0.3);animation:acceptPulse 1.5s ease infinite}
.call-btn svg{width:24px;height:24px;fill:#fff}

/* ══════════════════════════════════
   SCENE 4 — VIDEO CHAT
   ══════════════════════════════════ */
.scene-videochat{background:#080810}

.vc-phone{
  width:260px;height:500px;background:#111;border-radius:32px;
  border:3px solid #222;position:relative;overflow:hidden;
  box-shadow:0 20px 80px rgba(0,0,0,0.8);
}
.vc-screen{position:absolute;inset:8px;border-radius:24px;overflow:hidden;background:#1a1a2e}

/* officer video feed */
.officer-feed{
  position:absolute;inset:0;
  background:linear-gradient(180deg,#151520 0%,#1a1520 100%);
  display:flex;align-items:center;justify-content:center;
}
.officer-avatar{position:relative;transform:scale(0.85)}
.officer-head{
  width:90px;height:105px;background:#b5854b;border-radius:50%;
  position:relative;box-shadow:inset -6px -4px 15px #8b6530;
}
.officer-hat{
  position:absolute;top:-18px;left:-8px;right:-8px;height:32px;
  background:#1a237e;border-radius:8px 8px 40% 40%;
  border-bottom:4px solid #ffd54f;
}
.officer-hat::before{
  content:'';position:absolute;top:-4px;left:50%;transform:translateX(-50%);
  width:20px;height:8px;background:#ffd54f;border-radius:2px;
}
.officer-brim{
  position:absolute;top:8px;left:-16px;right:-16px;height:8px;
  background:#0d1257;border-radius:50%;
}
.officer-eyes{
  position:absolute;top:42px;left:50%;transform:translateX(-50%);
  display:flex;gap:20px;
}
.officer-eye{
  width:16px;height:16px;background:#fff;border-radius:50%;position:relative;
}
.officer-eye::after{
  content:'';position:absolute;top:4px;left:4px;width:8px;height:8px;
  background:#1a0a00;border-radius:50%;
}
.officer-mouth{
  position:absolute;bottom:24px;left:50%;transform:translateX(-50%);
  width:16px;height:3px;background:#8b5a2b;border-radius:2px;
}
.officer-collar{
  position:absolute;bottom:-12px;left:50%;transform:translateX(-50%);
  width:70px;height:24px;background:#1a237e;border-radius:0 0 8px 8px;
}
.officer-badge{
  position:absolute;bottom:-8px;left:32px;width:10px;height:12px;
  background:#ffd54f;clip-path:polygon(50% 0%,100% 35%,80% 100%,20% 100%,0% 35%);
}

/* chat bubble */
.vc-bubble{
  position:absolute;bottom:100px;left:12px;right:12px;
  background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);
  border-radius:12px;padding:12px 14px;
  font-size:13px;color:#fff;line-height:1.5;
  border:1px solid rgba(255,255,255,0.08);
  opacity:0;transform:translateY(10px);
  transition:all .5s ease;
}
.vc-bubble.show{opacity:1;transform:translateY(0)}

/* self-view (small) */
.self-view{
  position:absolute;top:12px;right:12px;width:70px;height:90px;
  background:#1a1520;border-radius:10px;border:2px solid rgba(255,255,255,0.1);
  overflow:hidden;display:flex;align-items:center;justify-content:center;
}
.self-mini-face{
  width:30px;height:35px;background:var(--skin);border-radius:50%;
  position:relative;
}
.self-mini-face::before,.self-mini-face::after{
  content:'';position:absolute;width:5px;height:5px;background:#fff;border-radius:50%;top:12px;
}
.self-mini-face::before{left:7px}
.self-mini-face::after{right:7px}

/* vc header */
.vc-header{
  position:absolute;top:12px;left:12px;z-index:2;
  display:flex;align-items:center;gap:6px;
}
.vc-dot{width:8px;height:8px;border-radius:50%;background:var(--green);animation:blink 1.5s ease infinite}
.vc-label{font-size:11px;color:rgba(255,255,255,0.6);letter-spacing:0.05em}

/* ══════════════════════════════════
   SCENE 5 — SHOW DOCUMENTS
   ══════════════════════════════════ */
.scene-docs{background:#080810}

.docs-phone{
  width:260px;height:500px;background:#111;border-radius:32px;
  border:3px solid #222;position:relative;overflow:hidden;
  box-shadow:0 20px 80px rgba(0,0,0,0.8);
}
.docs-screen{
  position:absolute;inset:8px;border-radius:24px;overflow:hidden;
  background:#1a1a2e;display:flex;align-items:center;justify-content:center;
}

/* document card being held up */
.doc-card{
  width:180px;height:110px;background:linear-gradient(135deg,#f5f0e8,#e8e0d0);
  border-radius:8px;position:relative;padding:10px;
  box-shadow:0 4px 20px rgba(0,0,0,0.4);
  animation:holdUp 2s ease forwards;
  transform:translateY(60px) rotate(2deg);
}
.doc-card::before{
  content:'DRIVER LICENSE';position:absolute;top:6px;left:10px;
  font-size:7px;font-weight:700;letter-spacing:0.1em;color:#1a237e;
}
.doc-photo{
  position:absolute;top:24px;left:10px;width:32px;height:38px;
  background:var(--skin);border-radius:4px;
}
.doc-lines{position:absolute;top:26px;left:50px;right:10px}
.doc-line{
  height:3px;background:rgba(0,0,0,0.15);border-radius:1px;margin-bottom:5px;
}
.doc-line:nth-child(2){width:70%}
.doc-line:nth-child(3){width:50%}
.doc-barcode{
  position:absolute;bottom:8px;left:10px;right:10px;height:14px;
  background:repeating-linear-gradient(90deg,#000 0px,#000 1px,transparent 1px,transparent 3px);
  opacity:0.3;
}

/* scanning overlay */
.scan-line{
  position:absolute;top:0;left:0;right:0;height:3px;
  background:linear-gradient(90deg,transparent,var(--green),transparent);
  animation:scanDown 1.5s .5s ease-in-out forwards;
  opacity:0;
}
.verified-badge{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);
  width:64px;height:64px;background:var(--green);border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 40px rgba(0,230,118,0.4);
  animation:popIn .4s 2.2s cubic-bezier(0.34,1.56,0.64,1) forwards;
}
.verified-badge svg{width:32px;height:32px;fill:#fff}

/* ══════════════════════════════════
   SCENE 6 — TICKET RESULT
   ══════════════════════════════════ */
.scene-ticket{background:var(--traafik-bg)}

.ticket-phone{
  width:280px;height:540px;background:#111;border-radius:34px;
  border:3px solid #222;position:relative;overflow:hidden;
  box-shadow:0 20px 80px rgba(0,0,0,0.8),0 0 80px rgba(0,230,118,0.03);
}
.ticket-screen{
  position:absolute;inset:8px;border-radius:26px;overflow:hidden;
  background:var(--traafik-bg);
}
.app-header{
  padding:16px 16px 12px;display:flex;align-items:center;justify-content:space-between;
  border-bottom:1px solid var(--traafik-border);
}
.app-logo{
  font-family:'Syne',sans-serif;font-weight:800;font-size:18px;color:#fff;
  letter-spacing:-0.02em;
}
.app-logo span{color:var(--green)}
.app-status{
  font-size:10px;background:rgba(0,230,118,0.12);color:var(--green);
  padding:3px 8px;border-radius:10px;font-weight:600;
}

.ticket-content{padding:16px}
.ticket-card-ui{
  background:var(--traafik-card);border:1px solid var(--traafik-border);
  border-radius:14px;padding:18px;margin-bottom:12px;
  opacity:0;animation:slideUp .5s .3s ease forwards;
}
.ticket-type{
  font-size:11px;color:rgba(255,255,255,0.4);text-transform:uppercase;
  letter-spacing:0.1em;margin-bottom:4px;font-weight:600;
}
.ticket-offense{font-size:16px;font-weight:600;color:#fff;margin-bottom:12px}
.ticket-detail{
  display:flex;justify-content:space-between;align-items:center;
  padding:8px 0;border-top:1px solid var(--traafik-border);
  font-size:13px;color:rgba(255,255,255,0.5);
}
.ticket-detail strong{color:#fff;font-weight:600}

.ticket-amount{
  text-align:center;padding:20px 0 16px;
  opacity:0;animation:slideUp .5s .6s ease forwards;
}
.ticket-amount .dollar{
  font-family:'Syne',sans-serif;font-size:48px;font-weight:800;color:#fff;
}
.ticket-amount .label{
  font-size:12px;color:rgba(255,255,255,0.4);margin-top:4px;
}

.pay-btn{
  width:100%;padding:14px;border:none;border-radius:12px;
  background:linear-gradient(135deg,var(--green),var(--green2));
  color:#000;font-family:'DM Sans',sans-serif;font-weight:600;font-size:15px;
  cursor:pointer;margin-top:8px;
  opacity:0;animation:slideUp .5s .9s ease forwards;
  box-shadow:0 4px 20px rgba(0,230,118,0.25);
}

.safety-banner{
  margin-top:14px;background:rgba(0,230,118,0.06);
  border:1px solid rgba(0,230,118,0.15);border-radius:10px;
  padding:10px 12px;display:flex;align-items:center;gap:8px;
  opacity:0;animation:slideUp .5s 1.2s ease forwards;
}
.safety-icon{
  width:28px;height:28px;min-width:28px;background:rgba(0,230,118,0.12);
  border-radius:50%;display:flex;align-items:center;justify-content:center;
}
.safety-icon svg{width:14px;height:14px;fill:var(--green)}
.safety-text{font-size:11px;color:rgba(255,255,255,0.6);line-height:1.4}
.safety-text strong{color:var(--green);font-weight:600}

/* ══════════════════════════════════
   SCENE 7 — FINALE
   ══════════════════════════════════ */
.scene-finale{background:var(--night)}
.finale-content{text-align:center;padding:0 24px}
.finale-msg{
  font-family:'Syne',sans-serif;font-weight:800;
  font-size:clamp(24px,5vw,48px);color:#fff;
  letter-spacing:-0.03em;line-height:1.2;
  opacity:0;animation:fadeUp 1s .2s ease forwards;
}
.finale-msg em{color:var(--green);font-style:normal}
.finale-sub{
  font-size:clamp(13px,1.8vw,18px);color:rgba(255,255,255,0.45);
  margin-top:16px;line-height:1.6;max-width:460px;margin-left:auto;margin-right:auto;
  opacity:0;animation:fadeUp 1s .6s ease forwards;
}
.finale-logo{
  font-family:'Syne',sans-serif;font-weight:800;font-size:28px;color:#fff;
  margin-top:40px;letter-spacing:-0.02em;
  opacity:0;animation:fadeUp 1s 1s ease forwards;
}
.finale-logo span{color:var(--green)}
.finale-tagline{
  font-size:12px;color:rgba(255,255,255,0.3);margin-top:6px;
  letter-spacing:0.2em;text-transform:uppercase;
  opacity:0;animation:fadeUp 1s 1.2s ease forwards;
}
#replay-btn{
  margin-top:36px;padding:12px 32px;border:1px solid var(--traafik-border);
  background:transparent;color:rgba(255,255,255,0.5);border-radius:8px;
  font-family:'DM Sans',sans-serif;font-size:14px;cursor:pointer;
  transition:all .3s ease;opacity:0;animation:fadeUp 1s 1.5s ease forwards;
}
#replay-btn:hover{border-color:var(--green);color:var(--green)}

/* ══════════════════════════════════
   KEYFRAMES
   ══════════════════════════════════ */
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes scrollLane{from{transform:translateX(0)}to{transform:translateX(-80px)}}
@keyframes flashRed{from{opacity:1;box-shadow:0 0 15px var(--red)}to{opacity:0.2;box-shadow:0 0 4px var(--red)}}
@keyframes flashBlue{from{opacity:1;box-shadow:0 0 15px var(--blue)}to{opacity:0.2;box-shadow:0 0 4px var(--blue)}}
@keyframes sweepRed{from{opacity:0.5}to{opacity:1}}
@keyframes dartEyes{0%,100%{transform:translateX(0)}25%{transform:translateX(4px)}50%{transform:translateX(-3px)}75%{transform:translateX(2px)}}
@keyframes wideEyes{from{transform:scaleY(1)}to{transform:scaleY(1.1)}}
@keyframes furrow{from{transform:rotate(8deg) translateY(0)}to{transform:rotate(12deg) translateY(-2px)}}
@keyframes mouthTremble{from{transform:translateX(-50%) scaleX(1)}to{transform:translateX(-50%) scaleX(1.1)}}
@keyframes sweatDrop{0%{opacity:0;transform:translateY(0)}20%{opacity:1}100%{opacity:0;transform:translateY(40px)}}
@keyframes grip{from{transform:scaleX(1)}to{transform:scaleX(1.05)}}
@keyframes pulseRB{from{background:linear-gradient(90deg,var(--red),transparent)}to{background:linear-gradient(90deg,transparent,var(--blue))}}
@keyframes rbAmbient{
  from{background:radial-gradient(ellipse at 60% 20%,rgba(255,23,68,0.04),transparent 60%)}
  to{background:radial-gradient(ellipse at 40% 20%,rgba(68,138,255,0.04),transparent 60%)}
}
@keyframes ringPulse{
  0%{box-shadow:0 0 0 0 rgba(0,230,118,0.4)}
  70%{box-shadow:0 0 0 20px rgba(0,230,118,0)}
  100%{box-shadow:0 0 0 0 rgba(0,230,118,0)}
}
@keyframes acceptPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.3}}
@keyframes holdUp{
  0%{transform:translateY(60px) rotate(2deg);opacity:0}
  100%{transform:translateY(0) rotate(-1deg);opacity:1}
}
@keyframes scanDown{
  0%{top:0;opacity:1}
  100%{top:100%;opacity:0.5}
}
@keyframes popIn{from{transform:translate(-50%,-50%) scale(0)}to{transform:translate(-50%,-50%) scale(1)}}
@keyframes slideUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
</style>
</head>
<body>

<div id="progress"></div>

<div id="cinema">
  <!-- SCENE 0: TITLE -->
  <div class="scene scene-title active" data-scene="0">
    <div class="title-logo">tr<span>aa</span>fik</div>
    <div class="title-sub">presents</div>
    <div class="caption" style="bottom:48px">A safer way to handle traffic stops</div>
  </div>

  <!-- SCENE 1: ROAD -->
  <div class="scene scene-road" data-scene="1">
    <div class="stars" id="stars"></div>
    <div class="moon"></div>
    <div class="road-surface">
      <div class="road-edge"></div>
      <div class="lane-marks" id="lane-marks"></div>
      <div class="shoulder-line"></div>
    </div>
    <div class="light-sweep"></div>
    <div class="light-sweep2"></div>
    <div class="car driver-car" id="driver-car">
      <div class="car-body">
        <div class="car-cabin"></div>
        <div class="windshield"></div>
        <div class="car-base">
          <div class="headlight"></div>
          <div class="taillight"></div>
        </div>
        <div class="wheel wheel-f"></div>
        <div class="wheel wheel-r"></div>
      </div>
    </div>
    <div class="car police-car" id="police-car">
      <div class="car-body">
        <div class="light-bar"><div class="l-red"></div><div class="l-blue"></div></div>
        <div class="car-cabin"></div>
        <div class="car-base"></div>
        <div class="wheel wheel-f"></div>
        <div class="wheel wheel-r"></div>
      </div>
    </div>
    <div class="caption" id="road-caption"></div>
  </div>

  <!-- SCENE 2: NERVOUS DRIVER -->
  <div class="scene scene-nervous" data-scene="2">
    <div class="car-interior">
      <div class="rb-glow"></div>
      <div class="rearview"><div class="rearview-lights"></div></div>
      <div class="driver-face">
        <div class="head">
          <div class="hair"></div>
          <div class="brow brow-l"></div>
          <div class="brow brow-r"></div>
          <div class="eyes">
            <div class="eye"><div class="pupil"></div></div>
            <div class="eye"><div class="pupil"></div></div>
          </div>
          <div class="mouth"></div>
          <div class="sweat sweat-1"></div>
          <div class="sweat sweat-2"></div>
          <div class="sweat sweat-3"></div>
        </div>
      </div>
      <div class="steering">
        <div class="wheel-ring">
          <div class="hand hand-l"></div>
          <div class="hand hand-r"></div>
        </div>
      </div>
    </div>
    <div class="caption" id="nervous-caption"></div>
  </div>

  <!-- SCENE 3: PHONE RINGS -->
  <div class="scene scene-ring" data-scene="3">
    <div class="phone">
      <div class="phone-notch"></div>
      <div class="phone-screen">
        <div class="call-screen">
          <div class="call-icon">
            <svg viewBox="0 0 24 24"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg>
          </div>
          <div class="call-label">Traafik</div>
          <div class="call-name">Officer Johnson</div>
          <div class="call-type">Incoming Video Call</div>
          <div class="call-buttons">
            <div class="call-btn call-decline">
              <svg viewBox="0 0 24 24"><path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08a.956.956 0 0 1-.29-.7c0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28a11.27 11.27 0 0 0-2.67-1.85.996.996 0 0 1-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/></svg>
            </div>
            <div class="call-btn call-accept">
              <svg viewBox="0 0 24 24"><path d="M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/><circle cx="12" cy="15" r="2" fill="white" opacity="0.6"/></svg>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="caption" id="ring-caption"></div>
  </div>

  <!-- SCENE 4: VIDEO CHAT -->
  <div class="scene scene-videochat" data-scene="4">
    <div class="vc-phone">
      <div class="phone-notch"></div>
      <div class="vc-screen">
        <div class="officer-feed">
          <div class="vc-header">
            <div class="vc-dot"></div>
            <div class="vc-label">Traafik Secure Call</div>
          </div>
          <div class="officer-avatar">
            <div class="officer-head">
              <div class="officer-hat"><div class="officer-brim"></div></div>
              <div class="officer-eyes">
                <div class="officer-eye"></div>
                <div class="officer-eye"></div>
              </div>
              <div class="officer-mouth"></div>
              <div class="officer-badge"></div>
              <div class="officer-collar"></div>
            </div>
          </div>
          <div class="self-view"><div class="self-mini-face"></div></div>
          <div class="vc-bubble" id="vc-bubble">
            "Good evening. I clocked you going 47 in a 30. Could you hold your license and registration up to the camera for me?"
          </div>
        </div>
      </div>
    </div>
    <div class="caption" id="vc-caption"></div>
  </div>

  <!-- SCENE 5: DOCUMENTS -->
  <div class="scene scene-docs" data-scene="5">
    <div class="docs-phone">
      <div class="phone-notch"></div>
      <div class="docs-screen">
        <div class="doc-card" id="doc-card">
          <div class="doc-photo"></div>
          <div class="doc-lines">
            <div class="doc-line"></div>
            <div class="doc-line"></div>
            <div class="doc-line"></div>
          </div>
          <div class="doc-barcode"></div>
        </div>
        <div class="scan-line" id="scan-line"></div>
        <div class="verified-badge" id="verified-badge">
          <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
        </div>
      </div>
    </div>
    <div class="caption" id="docs-caption"></div>
  </div>

  <!-- SCENE 6: TICKET -->
  <div class="scene scene-ticket" data-scene="6">
    <div class="ticket-phone">
      <div class="phone-notch"></div>
      <div class="ticket-screen">
        <div class="app-header">
          <div class="app-logo">tr<span>aa</span>fik</div>
          <div class="app-status">Resolved</div>
        </div>
        <div class="ticket-content">
          <div class="ticket-card-ui">
            <div class="ticket-type">Citation</div>
            <div class="ticket-offense">Speeding — 47 in a 30 zone</div>
            <div class="ticket-detail"><span>Date</span><strong>Feb 26, 2026</strong></div>
            <div class="ticket-detail"><span>Officer</span><strong>Johnson, Badge #4412</strong></div>
            <div class="ticket-detail"><span>Location</span><strong>Oak Ave & 5th St</strong></div>
          </div>
          <div class="ticket-amount">
            <div class="dollar">$100</div>
            <div class="label">Fine Amount</div>
          </div>
          <button class="pay-btn">Pay Now</button>
          <div class="safety-banner">
            <div class="safety-icon">
              <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/></svg>
            </div>
            <div class="safety-text"><strong>Everyone stayed safe.</strong><br>This stop was handled entirely via video — no roadside interaction needed.</div>
          </div>
        </div>
      </div>
    </div>
    <div class="caption" id="ticket-caption"></div>
  </div>

  <!-- SCENE 7: FINALE -->
  <div class="scene scene-finale" data-scene="7">
    <div class="finale-content">
      <div class="finale-msg">No one had to step<br>out of <em>their car.</em></div>
      <div class="finale-sub">Traffic stops don't have to be tense encounters. With Traafik, everything is handled through a secure video call — safer for drivers, safer for officers.</div>
      <div class="finale-logo">tr<span>aa</span>fik</div>
      <div class="finale-tagline">The safe traffic stop</div>
      <button id="replay-btn" onclick="replay()">Watch Again</button>
    </div>
  </div>
</div>

<script>
// Generate stars
const starsEl = document.getElementById('stars');
for (let i = 0; i < 80; i++) {
  const s = document.createElement('div');
  s.className = 'star';
  s.style.left = Math.random() * 100 + '%';
  s.style.top = Math.random() * 100 + '%';
  s.style.opacity = Math.random() * 0.6 + 0.2;
  s.style.width = s.style.height = (Math.random() * 2 + 1) + 'px';
  starsEl.appendChild(s);
}

// Timeline system
const scenes = document.querySelectorAll('.scene');
const progress = document.getElementById('progress');

const timeline = [
  { scene: 0, at: 0,    duration: 3000,  caption: null },
  { scene: 0, at: 800,  action: () => showCaption('.scene-title .caption') },
  { scene: 1, at: 3000, duration: 7000,  caption: null },
  { scene: 1, at: 3500, action: () => {
    document.getElementById('police-car').classList.add('appear');
    showCaption('road-caption', 'A police cruiser appears behind with lights flashing...');
  }},
  { scene: 1, at: 5500, action: () => {
    document.getElementById('police-car').classList.add('pulled-over');
    document.getElementById('driver-car').classList.add('pulled-over');
    document.getElementById('lane-marks').classList.add('stopped');
    showCaption('road-caption', 'Both vehicles pull over to the shoulder.');
  }},
  { scene: 2, at: 10000, duration: 5000 },
  { scene: 2, at: 10500, action: () => showCaption('nervous-caption', "The driver grips the wheel, heart pounding. But the officer's door never opens.") },
  { scene: 3, at: 15000, duration: 4500 },
  { scene: 3, at: 15500, action: () => showCaption('ring-caption', 'Instead — a video call comes through the Traafik app.') },
  { scene: 4, at: 19500, duration: 5500 },
  { scene: 4, at: 20500, action: () => {
    document.getElementById('vc-bubble').classList.add('show');
    showCaption('vc-caption', 'The officer speaks from the safety of his cruiser.');
  }},
  { scene: 5, at: 25000, duration: 5000 },
  { scene: 5, at: 25500, action: () => showCaption('docs-caption', 'The driver holds up their documents to the camera.') },
  { scene: 6, at: 30000, duration: 6000 },
  { scene: 6, at: 30500, action: () => showCaption('ticket-caption', 'A $100 ticket — handled entirely through the app.') },
  { scene: 7, at: 36000, duration: 0 },
];

const totalDuration = 36000;
let startTime = null;
let animFrame = null;
let currentScene = -1;
let executedActions = new Set();

function showCaption(idOrSelector, text) {
  if (idOrSelector.startsWith('.') || idOrSelector.startsWith('#')) {
    const el = document.querySelector(idOrSelector);
    if (el) el.classList.add('show');
  } else {
    const el = document.getElementById(idOrSelector);
    if (el) {
      if (text) el.textContent = text;
      el.classList.add('show');
    }
  }
}

function hideAllCaptions() {
  document.querySelectorAll('.caption').forEach(c => c.classList.remove('show'));
}

function setScene(idx) {
  if (idx === currentScene) return;
  currentScene = idx;
  scenes.forEach((s, i) => {
    s.classList.toggle('active', i === idx);
  });
}

function tick(ts) {
  if (!startTime) startTime = ts;
  const elapsed = ts - startTime;

  // Progress bar
  const pct = Math.min(elapsed / totalDuration * 100, 100);
  progress.style.width = pct + '%';

  // Find which scene should be active
  let activeScene = 0;
  for (let i = timeline.length - 1; i >= 0; i--) {
    const t = timeline[i];
    if (elapsed >= t.at && t.duration !== undefined) {
      activeScene = t.scene;
      break;
    }
  }
  setScene(activeScene);

  // Execute timed actions
  for (let i = 0; i < timeline.length; i++) {
    const t = timeline[i];
    if (elapsed >= t.at && t.action && !executedActions.has(i)) {
      executedActions.add(i);
      t.action();
    }
  }

  if (elapsed < totalDuration + 2000) {
    animFrame = requestAnimationFrame(tick);
  }
}

function replay() {
  // Reset everything
  startTime = null;
  currentScene = -1;
  executedActions.clear();
  progress.style.width = '0%';

  // Reset road scene
  document.getElementById('police-car').classList.remove('appear', 'pulled-over');
  document.getElementById('driver-car').classList.remove('pulled-over');
  document.getElementById('lane-marks').classList.remove('stopped');

  // Reset video chat
  document.getElementById('vc-bubble').classList.remove('show');

  // Reset all captions
  hideAllCaptions();

  // Reset doc animations by re-cloning
  const docCard = document.getElementById('doc-card');
  const scanLine = document.getElementById('scan-line');
  const verified = document.getElementById('verified-badge');
  if (docCard) { const c = docCard.cloneNode(true); docCard.parentNode.replaceChild(c, docCard); }
  if (scanLine) { const c = scanLine.cloneNode(true); scanLine.parentNode.replaceChild(c, scanLine); }
  if (verified) { const c = verified.cloneNode(true); verified.parentNode.replaceChild(c, verified); }

  // Reset ticket animations
  document.querySelectorAll('.ticket-card-ui, .ticket-amount, .pay-btn, .safety-banner').forEach(el => {
    const clone = el.cloneNode(true);
    el.parentNode.replaceChild(clone, el);
  });

  // Reset finale animations
  document.querySelectorAll('.finale-msg, .finale-sub, .finale-logo, .finale-tagline, #replay-btn').forEach(el => {
    const clone = el.cloneNode(true);
    el.parentNode.replaceChild(clone, el);
  });
  // Re-attach replay handler
  const newBtn = document.getElementById('replay-btn');
  if (newBtn) newBtn.addEventListener('click', replay);

  // Reset title animations
  document.querySelectorAll('.title-logo, .title-sub').forEach(el => {
    const clone = el.cloneNode(true);
    el.parentNode.replaceChild(clone, el);
  });

  // Reset all scenes
  scenes.forEach(s => s.classList.remove('active'));

  // Restart
  if (animFrame) cancelAnimationFrame(animFrame);
  animFrame = requestAnimationFrame(tick);
}

// Start the animation
animFrame = requestAnimationFrame(tick);
</script>
</body>
</html>
